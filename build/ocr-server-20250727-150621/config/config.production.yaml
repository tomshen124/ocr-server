# =====================================================================
# OCR智能预审系统 - 生产环境配置
# =====================================================================
# 基于: config.yaml.template
# 说明: 本文件仅包含生产环境特定的配置覆盖
# 注意: 敏感信息请使用环境变量设置
# =====================================================================

# 服务配置 - 使用实际域名
host: "${OCR_HOST:-https://ocr.example.com}"
port: ${OCR_PORT:-31101}

# 数据库配置 - 使用DM数据库
DMSql:
  database_host: "${DB_HOST}"
  database_port: "${DB_PORT:-5236}"
  database_user: "${DB_USER}"
  database_password: "${DB_PASSWORD}"
  database_name: "${DB_NAME:-OCR_PROD}"

# OSS配置 - 使用实际OSS服务
"zhzwdt-oss":
  bucket: "${OSS_BUCKET}"
  server_url: "${OSS_ENDPOINT}"
  access_key: "${OSS_ACCESS_KEY}"
  access_key_secret: "${OSS_ACCESS_SECRET}"
  root: "ocr-preview-prod"
  public_url: "${OSS_PUBLIC_URL}"

# 调试模式 - 生产环境必须关闭
debug:
  enabled: false
  enable_mock_login: false
  mock_login_warning: false
  tools_enabled:
    api_test: false
    mock_login: false
    preview_demo: false
    flow_test: false
    system_monitor: false
    data_manager: false

# 日志配置 - 生产环境使用info级别
logging:
  level: "info"
  file:
    enabled: true
    directory: "/var/log/ocr-server"
    retention_days: 30

# 监控配置 - 生产环境启用
monitoring:
  enabled: true

# 第三方访问控制 - 生产环境启用
third_party_access:
  enabled: true
  signature:
    required: true
    timestamp_tolerance: 300
  rate_limiting:
    enabled: true
    requests_per_minute: 100
    requests_per_hour: 1000

# 故障转移 - 生产环境必须启用
failover:
  database:
    enabled: true
    health_check_interval: 30
    max_retries: 3
    retry_delay: 1000
    fallback_to_local: true
    local_data_dir: "/var/lib/ocr-server/fallback/db"
  storage:
    enabled: true
    health_check_interval: 30
    max_retries: 3
    retry_delay: 1000
    auto_switch_to_local: true
    sync_when_recovered: true
    local_fallback_dir: "/var/lib/ocr-server/fallback/storage"

# 性能优化 - 生产环境配置
performance:
  ocr:
    max_concurrent_tasks: 20
    task_timeout: 600
    retry_on_failure: true
  cache:
    preview_ttl: 7200
    max_memory_size: 2048
  file:
    max_upload_size: 104857600  # 100MB